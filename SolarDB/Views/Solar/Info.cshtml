@model SolarDB.ViewModel.SolarViewModel

<script type="text/javascript">
    var facilities = @Html.Raw(Json.Serialize(@Model.facilities));
    var weather = @Html.Raw(Json.Serialize(@Model.weatherReadings));
    var power = @Html.Raw(Json.Serialize(@Model.powerReadings));
    var source = @Html.Raw(Json.Serialize(@Model.powerSources));
</script>

@{
    ViewData["Title"] = "Readings";
}

<style>

    #container1 {
        width: 100%;
        height: 100%;
    }

    #formDiv {
        border: solid 1px black;
        float:left;
        padding:2px;
    }

    .checkBoxContainer
    {
        border:solid black 1px;
        float:left;
        padding:2px;
        margin:1px;
    }

    .checkBoxList
    {
        display:none;
    }

    .sideBySide {
        width: 50%;
        height: 100%;
        float: left;
        overflow-y: auto;
    }

    .tableStyle {
        border: 1px solid black;
        padding:1px;
    }

    th {
        border-left: solid black 1px;
    }

    .tableStyle tr th {
        font-size: 8pt;
        text-align: center;
    }

    .clear {
        clear: both;
    }

    canvas
    {
        width:650px;
        height:500px;
        border:solid 1px black;
    }

</style>

<!-- ###########################################
     ###########################################
     ###########################################
     ########################################### -->

<div id="container1">
    <h1>Select data below to create a graph</h1>
</div>

<div class="clear"><br /><br /></div>

@{
    //Switches the year around. Expects the format found C# American DateTime type
    //ex: "05-15-2020" -> "2020-05-15"
    string convertDate(string d1)
    {
        return d1.Substring(6) + "-" + d1.Substring(0, 5);
    }

}

<div id="formDiv">
    <form method="post" action="">
        <label for="DateStart">Start Date</label>
        <input type="date" name="startDate" value="@convertDate("05-15-2020")" />

        <label for="DateEnd">End Date</label>
        <input type="date" name="endDate" value="@convertDate("05-16-2020")" />

        <label for="PlantNum">Plant</label>
        <select id="PlantNum" name="plantNum">
            <!--
            <option value="4135001">4135001</option>
            <option value="4136001">4136001</option>
            -->
            @{ 
                foreach(var fc in Model.facilities)
                {
                    <option value="@fc.PlantNumber">@fc.PlantNumber</option>
                }
            }
            <option value="All">All</option>
        </select>
        <br />

        <div class="checkBoxContainer">
            <label for="showWeather">Show Weather Readings</label>
            <input type="checkbox" id="showWeatherReading" name="showWeather" onclick="checkboxValue('showWeatherReading')" />
        </div>
        <div class="checkBoxContainer">
            <label for="showPower">Show Power Readings</label>
            <input type="checkbox" id="showPowerReading" name="showPower" value="true" onclick="checkboxValue('showPowerReading')" />
        </div>
        <div class="checkBoxContainer">
            <label for="showSource">Show Power Source</label>
            <input type="checkbox" id="showPowerSource" name="showSource" value="true" onclick="checkboxValue('showPowerSource')" />
        </div>
        <br />
        <input type="submit" value="Submit" />
    </form>
</div>

<div class="clear"><br /></div>

<!-- Main content Shown if post-->
<div id="container1">
    <p>Here's a graph when its a POST</p>
    @if (Context.Request.Method == "POST")
     {
            <canvas id="graph">Your browser does not support the canvas element.</canvas>
            <script>charts.regChart("graph");</script>
     }
</div>